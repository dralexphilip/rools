{
  "tradePartner": "TPL_EXPRESS_SCRIPTS",
  "id": "331",
  "ruleId": 331,
  "description": "RULE_331",
  "status": "Draft",
  "version": "1.0",
  "insertSql": "insert into clone_lead select *, 'RULE_331' from cob_lead_staging where carrier_name = 'EXPRESS_SCRIPTS' and (subgroup_number in ('DSMA', 'RXBVERI', 'NJTCPRX', 'JNAA', 'JQLA')  or group_name in ('BBB OMNIA 76186', 'COST PLUS OMNIA 76186', 'HRZN-OMNIA GRPS', 'OMNI PLAN', 'OMNIAPLN'))",
  "selectRule": {
    "combinator": "and",
    "rules": [
      {
        "value": [
          "EXPRESS_SCRIPTS"
        ],
        "field": "TRADING_PARTNER_CARRIER_NAME",
        "operator": "equal to",
        "fieldDisplayType": "single select"
      },
      {
        "combinator": "or",
        "rules": [
          {
            "combinator": "or",
            "rules": [
              {
                "value": [
                  "DSMA"
                ],
                "field": "TRADING_PARTNER_SUB_GROUP_NUMBER",
                "operator": "equal to",
                "fieldDisplayType": "textbox"
              },
              {
                "value": [
                  "RXBVERI"
                ],
                "field": "TRADING_PARTNER_SUB_GROUP_NUMBER",
                "operator": "equal to",
                "fieldDisplayType": "textbox"
              },
              {
                "value": [
                  "NJTCPRX"
                ],
                "field": "TRADING_PARTNER_SUB_GROUP_NUMBER",
                "operator": "equal to",
                "fieldDisplayType": "textbox"
              },
              {
                "value": [
                  "JNAA"
                ],
                "field": "TRADING_PARTNER_SUB_GROUP_NUMBER",
                "operator": "equal to",
                "fieldDisplayType": "textbox"
              },
              {
                "value": [
                  "JQLA"
                ],
                "field": "TRADING_PARTNER_SUB_GROUP_NUMBER",
                "operator": "equal to",
                "fieldDisplayType": "textbox"
              }
            ]
          },
          {
            "combinator": "or",
            "rules": [
              {
                "value": [
                  "BBB OMNIA 76186"
                ],
                "field": "TRADING_PARTNER_GROUP_NAME",
                "operator": "equal to",
                "fieldDisplayType": "textbox"
              },
              {
                "value": [
                  "COST PLUS OMNIA 76186"
                ],
                "field": "TRADING_PARTNER_GROUP_NAME",
                "operator": "equal to",
                "fieldDisplayType": "textbox"
              },
              {
                "value": [
                  "HRZN-OMNIA GRPS"
                ],
                "field": "TRADING_PARTNER_GROUP_NAME",
                "operator": "equal to",
                "fieldDisplayType": "textbox"
              },
              {
                "value": [
                  "OMNI PLAN"
                ],
                "field": "TRADING_PARTNER_GROUP_NAME",
                "operator": "equal to",
                "fieldDisplayType": "textbox"
              },
              {
                "value": [
                  "OMNIAPLN"
                ],
                "field": "TRADING_PARTNER_GROUP_NAME",
                "operator": "equal to",
                "fieldDisplayType": "textbox"
              }
            ]
          }
        ]
      }
    ]
  },
  "depth": 1,
  "updateSql": "update clone_lead set carrier_name = 'BCBS NJ', member_id = ('NAT'|| policy_ssn), group_number = NULL, group_name= NULL, pbm_bin  = NULL, pbm_pcn  = NULL, plan_type = case when plan_type::text like '%PA%' then '{MM}' when plan_type::text like '%PM%' then '{MM}' when plan_type::text like '%MD%' then '{MC}' else plan_type end where match_carrier_rule_id_extra = 'RULE_331'",
  "updateRule": {
    "combinator": "set",
    "sets": [
      {
        "field": "TRADING_PARTNER_CARRIER_NAME",
        "operator": "equal to",
        "value": [
          "BCBS NJ"
        ],
        "fieldDisplayType": "textbox"
      },
      {
        "field": "TRADING_PARTNER_MEMBER_KEY",
        "operator": "prefix",
        "value": [
          "NAT",
          "TRADING_PARTNER_POLICYHOLDER_SSN"
        ],
        "fieldDisplayType": "textbox"
      },
      {
        "field": "TRADING_PARTNER_GROUP_NUMBER",
        "operator": "is null",
        "value": null,
        "fieldDisplayType": "textbox"
      },
      {
        "field": "TRADING_PARTNER_GROUP_NAME",
        "operator": "is null",
        "value": null,
        "fieldDisplayType": "textbox"
      },
      {
        "field": "TRADING_PARTNER_BIN",
        "operator": "is null",
        "value": null,
        "fieldDisplayType": "textbox"
      },
      {
        "field": "TRADING_PARTNER_PCN",
        "operator": "is null",
        "value": null,
        "fieldDisplayType": "textbox"
      },
      {
        "combinator": "case",
        "sets": [
          {
            "when": {
              "value": [
                "PA"
              ],
              "field": "TRADING_PARTNER_PLAN_TYPE",
              "operator": "contains",
              "fieldDisplayType": "textbox"
            },
            "then": {
              "value": [
                "MM"
              ],
              "field": "TRADING_PARTNER_PLAN_TYPE",
              "operator": "equal to",
              "fieldDisplayType": "textbox"
            }
          },
          {
            "when": {
              "value": [
                "PM"
              ],
              "field": "TRADING_PARTNER_PLAN_TYPE",
              "operator": "contains",
              "fieldDisplayType": "textbox"
            },
            "then": {
              "value": [
                "MM"
              ],
              "field": "TRADING_PARTNER_PLAN_TYPE",
              "operator": "equal to",
              "fieldDisplayType": "textbox"
            }
          },
          {
            "when": {
              "value": [
                "MD"
              ],
              "field": "TRADING_PARTNER_PLAN_TYPE",
              "operator": "contains",
              "fieldDisplayType": "textbox"
            },
            "then": {
              "value": [
                "MC"
              ],
              "field": "TRADING_PARTNER_PLAN_TYPE",
              "operator": "equal to",
              "fieldDisplayType": "textbox"
            }
          }
        ],
        "rootfield": "TRADING_PARTNER_PLAN_TYPE",
        "defaultvalue": ""
      }
    ]
  },
  "updateDepth": 1,
  "updateCondition": null,
  "publish": "S"
}