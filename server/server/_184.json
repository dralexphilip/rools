{
    "tradePartner": "TPL_EXPRESS_SCRIPTS",
    "id": "184",
    "ruleId": 184,
    "description": "RULE_184",
    "status": "Draft",
    "version": "1.0",
    "insertSql": "insert into clone_lead select *, 'RULE_25' from cob_lead_staging where carrier_name = 'EXPRESS_SCRIPTS' and subgroup_number IN ('BCTMAPD', 'BCTCOMM')",
    "selectRule": {
      "combinator": "and",
      "rules": [
        {
          "value": [
            "EXPRESS_SCRIPTS"
          ],
          "field": "TRADING_PARTNER_CARRIER_NAME",
          "operator": "equal to",
          "fieldDisplayType": "single select"
        },
        {
          "combinator": "or",
          "rules": [
            {
              "value": [
                "BCTMAPD"
              ],
              "field": "TRADING_PARTNER_SUB_GROUP_NUMBER",
              "operator": "equal to",
              "fieldDisplayType": "textbox"
            },
            {
              "value": [
                "BCTCOMM"
              ],
              "field": "TRADING_PARTNER_SUB_GROUP_NUMBER",
              "operator": "equal to",
              "fieldDisplayType": "textbox"
            }
          ]
        }
      ]
    },
    "depth": 1,
    "updateSql": "update clone_lead set pbm_bin  = NULL, pbm_pcn  = NULL, carrier_name = 'BCBS TN', member_id = (case when subgroup_number = 'BCTCOMM' then ('AKL' || member_id) else member_id end), group_number = NULL, group_name = NULL, plan_type = case when plan_type::text like '%PA%' then '{MM}' when plan_type::text like '%PM%' then '{MM}' when plan_type::text like '%MD%' then '{MC}' else plan_type end where match_carrier_rule_id_extra = 'RULE_25'",
    "updateRule": {
      "combinator": "set",
      "sets": [
        {
          "field": "TRADING_PARTNER_BIN",
          "operator": "is null",
          "value": null,
          "fieldDisplayType": "textbox"
        },
        {
          "field": "TRADING_PARTNER_PCN",
          "operator": "is null",
          "value": null,
          "fieldDisplayType": "textbox"
        },
        {
          "field": "TRADING_PARTNER_CARRIER_NAME",
          "operator": "equal to",
          "value": [
            "BCBS TN"
          ],
          "fieldDisplayType": "textbox"
        },
        {
          "combinator": "case",
          "sets": [
            {
              "when": {
                "value": [
                  "BCTCOMM"
                ],
                "field": "TRADING_PARTNER_SUB_GROUP_NUMBER",
                "operator": "equal to",
                "fieldDisplayType": "textbox"
              },
              "then": {
                "value": [
                  "AKL",
                  "TRADING_PARTNER_MEMBER_KEY"
                ],
                "field": "TRADING_PARTNER_MEMBER_KEY",
                "operator": "prefix",
                "fieldDisplayType": "textbox"
              }
            }
          ],
          "rootfield": "TRADING_PARTNER_MEMBER_KEY",
          "defaultvalue": ""
        },
        {
          "field": "TRADING_PARTNER_GROUP_NUMBER",
          "operator": "is null",
          "value": null,
          "fieldDisplayType": "textbox"
        },
        {
          "field": "TRADING_PARTNER_GROUP_NAME",
          "operator": "is null",
          "value": null,
          "fieldDisplayType": "textbox"
        },
        {
          "combinator": "case",
          "sets": [
            {
              "when": {
                "value": [
                  "PA"
                ],
                "field": "TRADING_PARTNER_PLAN_TYPE",
                "operator": "contains",
                "fieldDisplayType": "textbox"
              },
              "then": {
                "value": [
                  "MM"
                ],
                "field": "TRADING_PARTNER_PLAN_TYPE",
                "operator": "equal to",
                "fieldDisplayType": "textbox"
              }
            },
            {
              "when": {
                "value": [
                  "PM"
                ],
                "field": "TRADING_PARTNER_PLAN_TYPE",
                "operator": "contains",
                "fieldDisplayType": "textbox"
              },
              "then": {
                "value": [
                  "MM"
                ],
                "field": "TRADING_PARTNER_PLAN_TYPE",
                "operator": "equal to",
                "fieldDisplayType": "textbox"
              }
            },
            {
              "when": {
                "value": [
                  "MD"
                ],
                "field": "TRADING_PARTNER_PLAN_TYPE",
                "operator": "contains",
                "fieldDisplayType": "textbox"
              },
              "then": {
                "value": [
                  "MC"
                ],
                "field": "TRADING_PARTNER_PLAN_TYPE",
                "operator": "equal to",
                "fieldDisplayType": "textbox"
              }
            }
          ],
          "rootfield": "TRADING_PARTNER_PLAN_TYPE",
          "defaultvalue": ""
        }
      ]
    },
    "updateDepth": 2,
    "updateCondition": null,
    "publish": "S"
  }